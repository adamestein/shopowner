{% extends "base.html" %}

{% block title %}
    Inventory Applications: {{ action }} Item
{% endblock %}

{% block header %}
    {{ action }} Item
{% endblock %}

{% block extrahead %}
    <script type="text/javascript" src="{{ STATIC_URL }}admin/js/admin/RelatedObjectLookups.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/accounting.min.js"></script> 

    <script type="text/javascript">
        // Update the text that mentions how much commission will be made
        function update_commission_text()
        {
            var commission = accounting.formatMoney($("#id_price").val()*($("#id_commission").val()/100.0));
            $("#id_text_span_commission").text("(commission on this item would be " + commission + ")");
        }

        $(document).ready(function() {
            // Update the commission text when the price or commission changes
            $("#id_price").change(update_commission_text);
            $("#id_commission").change(update_commission_text);

            update_commission_text();
        });
    </script>
{% endblock %}

{% block content %}
    {% include "messages.html" %}

    <p>
        {{ action }} the details as required, then press <strong>{{ action }}</strong> to save the information.
    </p>

    {% if form.errors %}
        <p class="errornote">
            Please correct the errors below.
        </p>

        <br />
    {% endif %}

    <form method="post" {% if form.is_multipart %}enctype='multipart/form-data'{% endif %}>
        {% csrf_token %}

        {% include "form_buttons.html" with submit_name=action %}

        <table>
            {{ form.as_table }}
        </table>

        {% include "form_buttons.html" with submit_name=action %}
    </form>
{% endblock %}

